node{
tool name: 'Terraform', type: 'terraform'
stage('gitcheckout'){
git branch: 'main', credentialsId: 'github', url: 'https://github.com/Jyothiganaparthi/terraform4.git'
}
stage('init'){
sh 'terraform init -reconfigure'
}
stage('workspace'){
sh 'terraform workspace list'
sh 'terraform workspace new prod'
sh 'terraform workspace select dev'
}
stage('plan'){
sh 'terraform plan --var-file dev.tfvars -lock=false'
}
stage('apply'){
sh 'terraform apply --var-file dev.tfvars --auto-approve -lock=false'
}

}
